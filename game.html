<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" href="Cupid Arrow.png" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Valentine's Dayüíï</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(145deg, #ffb7c5 0%, #f8a5c2 40%, #f8bbd0 100%);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      position: relative;
      overflow-x: hidden;
    }

    /* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã */
    .game-wrapper {
      width: 100%;
      max-width: 550px;
      background: rgba(255, 245, 250, 0.75);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 64px 64px 48px 48px;
      box-shadow: 0 25px 50px rgba(190, 50, 100, 0.4), 0 0 0 2px rgba(255, 255, 255, 0.6) inset;
      padding: 22px 18px 30px;
      border: 1px solid rgba(255, 230, 240, 0.9);
    }

    /* —à–∞–ø–∫–∞ */
    .header {
      text-align: center;
      margin-bottom: 15px;
    }

    .header h1 {
      font-size: clamp(2.2rem, 12vw, 3.2rem);
      font-weight: 800;
      background: linear-gradient(135deg, #d62b6e, #ff4076);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 15px #ffa5c3;
      letter-spacing: 2px;
      font-family: 'Trebuchet MS', 'Playfair Display', serif;
      line-height: 1.1;
    }

    .sub {
      font-size: 1.2rem;
      color: #b03a62;
      background: rgba(255, 240, 245, 0.7);
      display: inline-block;
      padding: 6px 20px;
      border-radius: 60px;
      backdrop-filter: blur(4px);
      font-weight: 600;
      margin-top: 4px;
      border: 1px solid white;
    }

    /* —Å—á—ë—Ç –∏ –∂–∏–∑–Ω–∏ */
    .stats-panel {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255, 220, 235, 0.7);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      padding: 16px 20px;
      border-radius: 200px;
      margin: 15px 0 18px;
      border: 2px solid rgba(255, 255, 255, 0.9);
      box-shadow: 0 8px 18px #ffa0c0;
      font-weight: 700;
    }

    .score-box, .miss-box {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.7rem;
      background: white;
      padding: 10px 28px;
      border-radius: 60px;
      box-shadow: 0 4px 0 #d47a9e;
      color: #c2185b;
    }

    .miss-box {
      background: #ffeef4;
      color: #b4406a;
    }

    .score-box span, .miss-box span {
      font-size: 2rem;
      min-width: 40px;
      text-align: center;
    }

    /* –∏–≥—Ä–æ–≤–æ–π canvas */
    .canvas-container {
      background: rgba(255, 210, 230, 0.6);
      border-radius: 48px;
      padding: 12px;
      border: 4px solid white;
      box-shadow: inset 0 0 30px #ffc0e2, 0 18px 25px #d46a90;
      margin-bottom: 20px;
    }

    #gameCanvas {
      display: block;
      width: 100%;
      height: auto;
      background: radial-gradient(circle at 30% 30%, #ffe5f0, #ffccdd);
      border-radius: 36px;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><circle cx="18" cy="18" r="14" fill="%23ff6699" opacity="0.8" stroke="white" stroke-width="3"/><text x="8" y="26" fill="white" font-size="22">‚ù§Ô∏è</text></svg>') 18 18, auto;
      touch-action: none; /* –æ—Ç–∫–ª—é—á–∞–µ–º —Å–∫—Ä–æ–ª–ª –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ */
    }

    /* –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
    .action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin: 10px 0 5px;
    }

    .herf{
      color: #b13078;
      text-decoration: none
    }
    .btn {
      background: white;
      border: none;
      padding: 16px 32px;
      border-radius: 60px;
      font-size: 1.4rem;
      font-weight: 700;
      color: #b32e6a;
      box-shadow: 0 8px 0 #b54274, 0 12px 22px #f28eb8;
      transition: all 0.08s linear;
      border: 2px solid #fff5fb;
      flex: 1 1 auto;
      min-width: 180px;
      backdrop-filter: blur(4px);
      background: rgba(255, 255, 255, 0.9);
      cursor: pointer;
      touch-action: manipulation;
    }

    .btn:active {
      transform: translateY(6px);
      box-shadow: 0 2px 0 #b54274, 0 8px 18px #f28eb8;
    }

    .btn.small {
      padding: 14px 20px;
      font-size: 1.2rem;
      min-width: 120px;
      flex: 0 1 auto;
    }

    /* —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∫–æ–Ω—Ü–µ –∏–≥—Ä—ã */
    .gameover-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 240, 250, 0.95);
      backdrop-filter: blur(20px);
      padding: 28px 48px;
      border-radius: 120px;
      font-size: 2.8rem;
      font-weight: 800;
      color: #c13e72;
      box-shadow: 0 30px 50px #b94a7a;
      border: 6px solid white;
      z-index: 1000;
      text-align: center;
      white-space: nowrap;
      transition: 0.2s;
      line-height: 1.3;
      pointer-events: none;
    }

    .hidden {
      display: none;
    }

    /* –ª—ë–≥–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Å–æ–≤—Å–µ–º –º–∞–ª–µ–Ω—å–∫–∏—Ö */
    @media (max-width: 450px) {
      .game-wrapper { padding: 15px 12px; }
      .stats-panel { padding: 10px 12px; }
      .score-box, .miss-box { padding: 6px 16px; font-size: 1.4rem; }
      .btn { padding: 14px 18px; font-size: 1.2rem; min-width: 140px; }
      .gameover-popup { font-size: 2rem; padding: 20px 30px; white-space: normal; }
    }

    /* –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ª–µ—Ç–∞—é—â–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏ (—Ñ–æ–Ω) */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .floating-hearts span {
      position: absolute;
      color: rgba(255, 120, 170, 0.4);
      font-size: 2rem;
      animation: float 8s infinite ease-in-out;
      user-select: none;
    }

    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg) scale(0.8); opacity: 0; }
      50% { opacity: 0.7; }
      100% { transform: translateY(-20vh) rotate(360deg) scale(1.4); opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ–Ω —Å —Å–µ—Ä–¥–µ—á–∫–∞–º–∏ (–ø—Ä–æ—Å—Ç–æ –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã) -->
  <div class="floating-hearts">
    <span style="left: 5%; animation-duration: 9s;">‚ù§Ô∏è</span>
    <span style="left: 15%; animation-duration: 12s;">üß°</span>
    <span style="left: 30%; animation-duration: 7s;">üíñ</span>
    <span style="left: 50%; animation-duration: 14s;">üíò</span>
    <span style="left: 70%; animation-duration: 10s;">üíù</span>
    <span style="left: 85%; animation-duration: 8s;">üíó</span>
    <span style="left: 92%; animation-duration: 11s;">üíì</span>
  </div>

  <div class="game-wrapper">
    <div class="header">
      <h1><a class= "herf" href="index.html">–ü–æ–π–º–∞–π —Å–µ—Ä–¥–µ—á–∫–∏</a></h1>
      <div class="sub">üíï –ª–æ–≤–∏ —Å–µ—Ä–¥–µ—á–∫–∏ üíï</div>
    </div>

    <!-- —Å—á—ë—Ç—á–∏–∫–∏ -->
    <div class="stats-panel">
      <div class="score-box">
        <span>‚ù§Ô∏è</span>
        <span id="scoreValue">0</span>
      </div>
      <div class="miss-box">
        <span>üíî</span>
        <span id="missValue">0</span>
        <span>/10</span>
      </div>
    </div>

    <!-- –æ–±–ª–∞—Å—Ç—å –∏–≥—Ä—ã -->
    <div class="canvas-container">
      <canvas id="gameCanvas" width="600" height="600"></canvas>
    </div>

    <!-- –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="action-buttons">
      <button class="btn" id="restartBtn">üíû –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
      <button class="btn small" id="addHeartsBtn">‚ûï –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–¥–µ—á–µ–∫</button>
    </div>

    <p style="text-align:center; margin-top:16px; color:#8d3362; font-weight:600;">üëÜ —Ç—ã–∫–∞–π –ø–æ —Å–µ—Ä–¥–µ—á–∫–∞–º! 10 –ø—Ä–æ–º–∞—Ö–æ–≤ ‚Äî –∫–æ–Ω–µ—Ü</p>
  </div>

  <!-- –º–æ–¥–∞–ª–∫–∞ game over / win -->
  <div id="gameoverModal" class="gameover-popup hidden"></div>

  <script>
    (function() {
      // ---------- –ù–ê–°–¢–†–û–ô–ö–ò ----------
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      const scoreSpan = document.getElementById('scoreValue');
      const missSpan = document.getElementById('missValue');
      const restartBtn = document.getElementById('restartBtn');
      const addHeartsBtn = document.getElementById('addHeartsBtn');
      const modal = document.getElementById('gameoverModal');

      // —Ñ–∏–∫—Å —Ä–∞–∑–º–µ—Ä–∞ canvas –ø–æ–¥ —ç–∫—Ä–∞–Ω (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–≤–∞–¥—Ä–∞—Ç 600x600, –Ω–æ CSS —Å–æ–∂–º—ë—Ç)
      canvas.width = 600;
      canvas.height = 600;

      // –∏–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      let hearts = [];
      let score = 0;
      let misses = 0;
      let gameActive = true;
      let animationId = null;
      let spawnInterval = null;

      const MAX_MISS = 10;
      const WIN_SCORE = 25;       // –ø–æ–±–µ–¥–Ω—ã–π —Å—á—ë—Ç
      const HEART_RADIUS = 32;     // —Ä–∞–¥–∏—É—Å –ø—Ä–∏–ª–∏–ø–∞–Ω–∏—è (–∫–ª–∏–∫)

      // ---------- –ö–õ–ê–°–° –°–ï–†–î–ï–ß–ö–ê ----------
      class Heart {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          // —Å–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
          this.vx = (Math.random() - 0.5) * 1.8;
          this.vy = (Math.random() - 0.5) * 1.8;
          this.radius = HEART_RADIUS;
        }

        // –¥–≤–∏–∂–µ–Ω–∏–µ
        update() {
          this.x += this.vx;
          this.y += this.vy;

          // –≥—Ä–∞–Ω–∏—Ü—ã —Å –æ—Ç—Å–∫–æ–∫–æ–º –∏ –ø–æ—Ç–µ—Ä–µ–π —ç–Ω–µ—Ä–≥–∏–∏
          if (this.x < this.radius) {
            this.x = this.radius;
            this.vx *= -0.7;
          }
          if (this.x > canvas.width - this.radius) {
            this.x = canvas.width - this.radius;
            this.vx *= -0.7;
          }
          if (this.y < this.radius) {
            this.y = this.radius;
            this.vy *= -0.7;
          }
          if (this.y > canvas.height - this.radius) {
            this.y = canvas.height - this.radius;
            this.vy *= -0.7;
          }

          // –Ω–µ–±–æ–ª—å—à–æ–µ —Ç—Ä–µ–Ω–∏–µ, —á—Ç–æ–± –Ω–µ –ª–µ—Ç–∞–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
          this.vx *= 0.998;
          this.vy *= 0.998;
        }

        // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –∫—Ä—É–≥)
        isClicked(px, py) {
          const dx = px - this.x;
          const dy = py - this.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          return dist < this.radius * 0.9;  // –¥–µ–ª–∞–µ–º —á—É—Ç—å –º–µ–Ω—å—à–µ, —á–µ—Å—Ç–Ω–µ–µ
        }

        // —Ä–∏—Å–æ–≤–∫–∞ –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Å–µ—Ä–¥–µ—á–∫–∞
        draw() {
          ctx.save();
          ctx.translate(this.x, this.y);

          // —Ç–µ–Ω—å
          ctx.shadowColor = '#ff8cb0';
          ctx.shadowBlur = 16;

          // –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è —Å–µ—Ä–¥—Ü–∞
          const gradient = ctx.createLinearGradient(-20, -20, 20, 20);
          gradient.addColorStop(0, '#ff3b6f');
          gradient.addColorStop(1, '#ff6f91');

          ctx.fillStyle = gradient;

          // —Ä–∏—Å—É–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ —Å–µ—Ä–¥—Ü–µ —á–µ—Ä–µ–∑ –∫—Ä–∏–≤—ã–µ –ë–µ–∑—å–µ
          ctx.beginPath();
          ctx.moveTo(0, 15);
          ctx.bezierCurveTo(-20, -10, -35, -5, 0, -25);
          ctx.bezierCurveTo(35, -5, 20, -10, 0, 15);
          ctx.fill();

          // –±–ª–∏–∫
          ctx.shadowBlur = 6;
          ctx.fillStyle = 'rgba(255,255,255,0.3)';
          ctx.beginPath();
          ctx.moveTo(-5, -10);
          ctx.bezierCurveTo(-12, -18, -18, -16, -5, -22);
          ctx.fill();

          ctx.restore();
        }
      }

      // ---------- –°–ü–ê–í–ù –°–ï–†–î–ï–ß–ö–ê (—Å–ª—É—á–∞–π–Ω–æ) ----------
      function spawnHeart() {
        if (!gameActive) return;
        // —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–≤–Ω–∏—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –æ–≥—Ä–∞–Ω–∏—á–∏–º –¥–æ 35
        if (hearts.length > 45) return;

        const x = HEART_RADIUS + Math.random() * (canvas.width - 2 * HEART_RADIUS);
        const y = HEART_RADIUS + Math.random() * (canvas.height - 2 * HEART_RADIUS);
        hearts.push(new Heart(x, y));
      }

      // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—á–∫–∏ —Å–µ—Ä–¥–µ—á–µ–∫ (–¥–ª—è –∫–Ω–æ–ø–∫–∏)
      function addRandomHearts(count = 5) {
        if (!gameActive) return;
        for (let i = 0; i < count; i++) {
          if (hearts.length < 60) spawnHeart();
        }
      }

      // ---------- –û–¢–†–ò–°–û–í–ö–ê ----------
      function drawScene() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // –Ω–µ–∂–Ω—ã–π —Ñ–æ–Ω
        const grad = ctx.createRadialGradient(300, 300, 50, 300, 300, 400);
        grad.addColorStop(0, '#ffe2f0');
        grad.addColorStop(1, '#ffc7df');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // —Ä–∏—Å—É–µ–º –≤—Å–µ —Å–µ—Ä–¥–µ—á–∫–∏
        hearts.forEach(heart => heart.draw());

        // –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ ‚Äî –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–ª–æ–π –∏ –Ω–∞–¥–ø–∏—Å—å
        if (!gameActive) {
          ctx.fillStyle = 'rgba(255, 200, 220, 0.5)';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.font = 'bold 38px "Segoe UI", "Playfair Display", cursive';
          ctx.fillStyle = '#b02b62';
          ctx.shadowColor = '#ffffff';
          ctx.shadowBlur = 18;
          ctx.textAlign = 'center';
          ctx.fillText('üíï Game over üíï', 300, 300);
          ctx.shadowBlur = 0;
        }
      }

      // ---------- –õ–û–ì–ò–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø ----------
      function update() {
        if (gameActive) {
          hearts.forEach(heart => heart.update());

          // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
          if (score >= WIN_SCORE) {
            gameActive = false;
            modal.innerText = 'ü•≥ –¢–´ –í–´–ò–ì–†–ê–õ–ê! ü•≥';
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('hidden'), 2500);
            stopIntervals();
          }

          // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
          if (misses >= MAX_MISS) {
            gameActive = false;
            modal.innerText = 'üò¢ –ø—Ä–æ–∏–≥—Ä—ã—à üò¢';
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('hidden'), 2000);
            stopIntervals();
          }
        }

        drawScene();
        animationId = requestAnimationFrame(update);
      }

      // –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ø–∞–≤–Ω–∞
      function stopIntervals() {
        if (spawnInterval) {
          clearInterval(spawnInterval);
          spawnInterval = null;
        }
      }

      // —Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã (–∏–ª–∏ —Ä–µ—Å—Ç–∞—Ä—Ç)
      function startGame() {
        // –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
        if (spawnInterval) clearInterval(spawnInterval);
        hearts = [];
        score = 0;
        misses = 0;
        gameActive = true;
        updateStats();

        modal.classList.add('hidden');

        // –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ø–∞–≤–Ω (–∫–∞–∂–¥—ã–µ 0.8 —Å–µ–∫)
        spawnInterval = setInterval(() => spawnHeart(), 800);

        // –µ—Å–ª–∏ –Ω–µ—Ç animation loop, –∑–∞–ø—É—Å—Ç–∏–º
        if (animationId) cancelAnimationFrame(animationId);
        animationId = requestAnimationFrame(update);
      }

      // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–∏—Ñ–µ—Ä–æ–∫
      function updateStats() {
        scoreSpan.textContent = score;
        missSpan.textContent = misses;
      }

      // ---------- –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ò–ö–û–í (–∫–æ–º–ø—å—é—Ç–µ—Ä + —Ç–∞—á) ----------
      function handleCanvasClick(e) {
        if (!gameActive) return;

        // –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–ª–∏–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ canvas
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;

        let clientX, clientY;

        if (e.touches) {
          // touch event
          clientX = e.touches[0].clientX;
          clientY = e.touches[0].clientY;
          e.preventDefault();   // —á—Ç–æ–±—ã –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª–æ
        } else {
          clientX = e.clientX;
          clientY = e.clientY;
        }

        const canvasX = (clientX - rect.left) * scaleX;
        const canvasY = (clientY - rect.top) * scaleY;

        // –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ø–∞–¥–∞–Ω–∏–µ –ø–æ —Å–µ—Ä–¥–µ—á–∫–∞–º (–∏–¥—ë–º —Å –∫–æ–Ω—Ü–∞, —á—Ç–æ–± —É–¥–∞–ª—è—Ç—å –≤–µ—Ä—Ö–Ω–∏–µ)
        let hit = false;
        for (let i = hearts.length - 1; i >= 0; i--) {
          if (hearts[i].isClicked(canvasX, canvasY)) {
            hearts.splice(i, 1);
            score++;
            hit = true;
            break;
          }
        }

        if (!hit) {
          misses++;
        }

        updateStats();

        // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –≤–Ω—É—Ç—Ä–∏ update, –Ω–æ –∏ –∑–¥–µ—Å—å –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É
        if (score >= WIN_SCORE && gameActive) {
          gameActive = false;
          modal.innerText = 'ü•≥ –¢–´ –í–´–ò–ì–†–ê–õ–ê! ü•≥';
          modal.classList.remove('hidden');
          setTimeout(() => modal.classList.add('hidden'), 2500);
          stopIntervals();
        }

        if (misses >= MAX_MISS && gameActive) {
          gameActive = false;
          modal.innerText = 'üò¢ –ø—Ä–æ–∏–≥—Ä—ã—à üò¢';
          modal.classList.remove('hidden');
          setTimeout(() => modal.classList.add('hidden'), 2000);
          stopIntervals();
        }
      }

      // ---------- –ü–ï–†–ï–ó–ê–ü–£–°–ö ----------
      restartBtn.addEventListener('click', () => {
        startGame();
      });

      // –∫–Ω–æ–ø–∫–∞ "–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–¥–µ—á–µ–∫" (—á–∏—Ç–µ—Ä—Å—Ç–≤–æ)
      addHeartsBtn.addEventListener('click', () => {
        if (gameActive) {
          addRandomHearts(6);
        }
      });

      // –Ω–∞–≤–µ—à–∏–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–∞–Ω–≤–∞—Å
      canvas.addEventListener('click', handleCanvasClick);
      canvas.addEventListener('touchstart', handleCanvasClick, { passive: false });
      // –æ—Ç–∫–ª—é—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ canvas
      canvas.addEventListener('contextmenu', (e) => e.preventDefault());

      // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      window.addEventListener('load', () => {
        startGame();
      });

      // —á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
      window.addEventListener('beforeunload', () => {
        if (spawnInterval) clearInterval(spawnInterval);
        if (animationId) cancelAnimationFrame(animationId);
      });

      // –∞–¥–∞–ø—Ç–∞—Ü–∏—è: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ –≤–Ω—É—Ç—Ä–∏ canvas
      canvas.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });

    })();
  </script>
</body>
</html>